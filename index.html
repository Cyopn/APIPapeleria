<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<body>

    <h1>Show File-select Fields</h1>

    <h3>Show a file-select field which allows only one file to be chosen:</h3>
    <form>
        <label for="myfile">Select a file:</label>
        <input placeholder="w" type="file" id="fileinput" name="myfile"><br><br>
    </form>
    <script>
        // Select your input type file and store it in a variable
        const input = document.getElementById('fileinput');

        // This will upload the file after having read it
        const upload = (file) => {
            fetch('http://localhost:4000/api/test/', { // Your POST endpoint
                method: 'POST',
                headers: {
                    "Content-Type": "application/json"
                },
                body: file
            }).then(
                response => response.json() // if the response is a JSON object
            ).then(
                success => console.log(success) // Handle the success response object
            ).catch(
                error => console.log(error) // Handle the error response object
            );
        };

        // Event handler executed when a file is selected
        const onSelectFile = () => upload(input.files[0]);

        // Add a listener on your input
        // It will be triggered when a file will be selected
        input.addEventListener('change', onSelectFile, false);
    </script>
</body>

</html>